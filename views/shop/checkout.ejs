<%- include('../includes/head.ejs') %>
<div class="container mts">
  <div class="row">
    <form class="col-md-7 cart fs-3 mbs" method="POST" action="/order">
      <div class="row">
        <div class="col-md-6">
          <label for="phone">Telefon *</label>
          <input
            type="text"
            class="form-control fs-4 mb-3 <%= validationErrors.find(e => e.param === 'phone') ? 'invalidInput' : '' %>"
            id="phone"
            name="phone"
            value="<%= (error) ? order.phone : '+998' %>"
          />
        </div>
        <div class="col-md-6">
          <label for="name">F.I.SH *</label>
          <input
            type="text"
            class="form-control fs-4 mb-3 <%= validationErrors.find(e => e.param === 'name') ? 'invalidInput' : '' %>"
            id="name"
            name="name"
            value="<%= (error) ? order.name : '' %>"
          />
        </div>
      </div>
      <div class="row">
        <div class="col-md-6">
          <label for="province">Viloyat *</label>
          <input
            type="text"
            class="form-control fs-4 mb-3 <%= validationErrors.find(e => e.param === 'province') ? 'invalidInput' : '' %>"
            id="province"
            name="province"
            value="<%= (error) ? order.province : '' %>"
          />
        </div>
        <div class="col-md-6">
          <label for="region">Tuman *</label>
          <input
            type="text"
            class="form-control fs-4 mb-3 <%= validationErrors.find(e => e.param === 'region') ? 'invalidInput' : '' %>"
            id="region"
            name="region"
            value="<%= (error) ? order.region : '' %>"
          />
        </div>
      </div>
      <div class="row">
        <div class="col-md-6">
          <label for="extraAddress">Aholi punkti *</label>
          <input
            type="text"
            class="form-control fs-4 mb-3 <%= validationErrors.find(e => e.param === 'extraAddress') ? 'invalidInput' : '' %>"
            id="extraAddress"
            name="extraAddress"
            value="<%= (error) ? order.extraAddress : '' %>"
          />
        </div>
        <div class="col-md-6">
          <label for="address">Manzil *</label>
          <input
            type="text"
            class="form-control fs-4 mb-3 <%= validationErrors.find(e => e.param === 'address') ? 'invalidInput' : '' %>"
            id="address"
            name="address"
            value="<%= (error) ? order.address : '' %>"
          />
        </div>
      </div>
      <div class="text-center mt-4">
        <button type="submit" class="btn btn-warning fs-3">Buyurtma berish</button>
      </div>
    </form>
    <div class="col-md-4 cart offset-md-1 fs-3 text-center">
      <h4 class="text-primary">
        Savatchadagi mahsulotlar soni: <span class="fw-bold"><%= products.length %></span>
      </h4>
      <h3>Umumiy miqdor:</h3>
      <h1 class="d-inline"><%= total %></h1>
      &nbsp<span class="h1"> so‘m</span>
      <hr />
      <% for(let product of products) {%>
      <div class="d-flex align-items-center cartImg mb-5">
        <img src="<%= product.images[0].imageUrl %>" alt="Product Image" class="me-5 product-image" />
        <div class="d-flex flex-column">
          <h4 class="ms-3 mt-3"><%= product.name %></h4>
          <h5><%= product.cartItem.quantity%> dona</h5>
          <h4>Narxi: <%=product.price%>  so‘m</h4>
        </div>
      </div>
      <% } %>
    </div>
  </div>
</div>
<%- include('../includes/end.ejs') %>
